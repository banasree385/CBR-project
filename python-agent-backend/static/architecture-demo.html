<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBR Multi-Agent Architecture Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #1976d2;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .architecture {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .layer {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }
        
        .layer h3 {
            margin: 0 0 15px 0;
            color: #1976d2;
            font-size: 1.3em;
        }
        
        .user-layer { background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%); }
        .api-layer { background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); }
        .service-layer { background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); }
        .azure-layer { background: linear-gradient(135deg, #fff3e0 0%, #ffcc02 100%); }
        .data-layer { background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%); }
        
        .components {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .component {
            background: rgba(255,255,255,0.8);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid rgba(0,0,0,0.1);
            flex: 1;
            min-width: 200px;
            text-align: center;
        }
        
        .component strong {
            display: block;
            color: #1976d2;
            margin-bottom: 5px;
        }
        
        .agent-row {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .agent {
            flex: 1;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #4caf50;
            text-align: center;
        }
        
        .agent .emoji {
            font-size: 2em;
            display: block;
            margin-bottom: 10px;
        }
        
        .agent .title {
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 5px;
        }
        
        .flow-arrows {
            text-align: center;
            font-size: 2em;
            color: #1976d2;
            margin: 10px 0;
        }
        
        .flow {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .flow h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }
        
        .flow-step {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4caf50;
            position: relative;
        }
        
        .flow-step::before {
            content: attr(data-step);
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            background: #4caf50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .feature h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .feature ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .urls {
            background: #1976d2;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .urls h3 {
            color: white;
            margin-bottom: 15px;
        }
        
        .urls a {
            color: #90caf9;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        
        .urls a:hover {
            color: white;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ CBR Multi-Agent Architecture</h1>
        
        <div class="architecture">
            <!-- User Interface Layer -->
            <div class="layer user-layer">
                <h3>üåê User Interface Layer</h3>
                <div class="components">
                    <div class="component">
                        <strong>Web Chatbot</strong>
                        Interactive chat interface with auto-routing
                    </div>
                    <div class="component">
                        <strong>API Documentation</strong>
                        Swagger UI for testing and exploration
                    </div>
                </div>
            </div>
            
            <div class="flow-arrows">‚¨áÔ∏è</div>
            
            <!-- API Gateway Layer -->
            <div class="layer api-layer">
                <h3>üîå API Gateway Layer</h3>
                <div class="components">
                    <div class="component">
                        <strong>FastAPI Server</strong>
                        RESTful API endpoints on port 8000
                    </div>
                    <div class="component">
                        <strong>Health & Status</strong>
                        Real-time monitoring and agent status
                    </div>
                </div>
            </div>
            
            <div class="flow-arrows">‚¨áÔ∏è</div>
            
            <!-- Service Layer -->
            <div class="layer service-layer">
                <h3>‚öôÔ∏è Service Layer</h3>
                <div class="components">
                    <div class="component">
                        <strong>Foundry Agent Service</strong>
                        Core logic with retry mechanisms
                    </div>
                    <div class="component">
                        <strong>Azure Authentication</strong>
                        Secure token-based access
                    </div>
                </div>
            </div>
            
            <div class="flow-arrows">‚¨áÔ∏è</div>
            
            <!-- Azure AI Foundry Layer -->
            <div class="layer azure-layer">
                <h3>‚òÅÔ∏è Azure AI Foundry</h3>
                <div class="components">
                    <div class="component">
                        <strong>AI Project</strong>
                        prj-kotpagents-croy
                    </div>
                    <div class="component">
                        <strong>Thread Management</strong>
                        Conversation context & history
                    </div>
                </div>
                
                <div class="agent-row">
                    <div class="agent">
                        <span class="emoji">üéØ</span>
                        <div class="title">Orchestrator Agent</div>
                        <div>CBR_8_orch</div>
                        <small>Routes queries intelligently</small>
                    </div>
                    <div class="agent">
                        <span class="emoji">üîç</span>
                        <div class="title">Search Agent</div>
                        <div>cbr_8_search_agent</div>
                        <small>Provides detailed information</small>
                    </div>
                    <div class="agent">
                        <span class="emoji">üìÖ</span>
                        <div class="title">Booking Agent</div>
                        <div>cbr_8_booking_agent</div>
                        <small>Handles exam bookings</small>
                    </div>
                </div>
            </div>
            
            <div class="flow-arrows">‚¨áÔ∏è</div>
            
            <!-- Data Layer -->
            <div class="layer data-layer">
                <h3>üìä CBR Knowledge Base</h3>
                <div class="components">
                    <div class="component">
                        <strong>License Procedures</strong>
                        Complete renewal processes and requirements
                    </div>
                    <div class="component">
                        <strong>Exam Information</strong>
                        Booking procedures and scheduling
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Message Flow -->
        <div class="flow">
            <h3>üîÑ Message Flow Process</h3>
            <div class="flow-step" data-step="1">
                <strong>User Query:</strong> "I need help with license renewal"
            </div>
            <div class="flow-step" data-step="2">
                <strong>Orchestrator Analysis:</strong> Routes to Search Agent for license information
            </div>
            <div class="flow-step" data-step="3">
                <strong>Auto Follow-up:</strong> Web interface automatically calls Search Agent
            </div>
            <div class="flow-step" data-step="4">
                <strong>Detailed Response:</strong> Complete license renewal procedures and requirements
            </div>
            <div class="flow-step" data-step="5">
                <strong>Formatted Display:</strong> Professional markdown rendering with agent info
            </div>
        </div>
        
        <!-- Key Features -->
        <div class="features">
            <div class="feature">
                <h4>üéØ Smart Routing</h4>
                <ul>
                    <li>Intelligent query analysis</li>
                    <li>Automatic agent selection</li>
                    <li>Dual response system</li>
                </ul>
            </div>
            <div class="feature">
                <h4>üîß Reliability</h4>
                <ul>
                    <li>3-attempt retry logic</li>
                    <li>2-second backoff delays</li>
                    <li>Thread recovery mechanisms</li>
                </ul>
            </div>
            <div class="feature">
                <h4>‚òÅÔ∏è Azure Integration</h4>
                <ul>
                    <li>Real-time agent connection</li>
                    <li>Secure authentication</li>
                    <li>Thread & message management</li>
                </ul>
            </div>
            <div class="feature">
                <h4>üé® User Experience</h4>
                <ul>
                    <li>Markdown formatting</li>
                    <li>Response time metrics</li>
                    <li>Auto-routing follow-ups</li>
                </ul>
            </div>
        </div>
        
        <!-- Demo URLs -->
        <div class="urls">
            <h3>üöÄ Live Demo URLs</h3>
            <a href="http://localhost:8000/static/multi-agent-chatbot.html" target="_blank">
                üåê Web Interface - Multi-Agent Chatbot
            </a>
            <a href="http://localhost:8000/docs" target="_blank">
                üìö API Documentation - Swagger UI
            </a>
            <a href="http://localhost:8000/api/v1/foundry/status" target="_blank">
                üìä Agent Status - Real-time monitoring
            </a>
            <a href="http://localhost:8000/health" target="_blank">
                ‚ù§Ô∏è Health Check - System status
            </a>
        </div>
    </div>
</body>
</html>